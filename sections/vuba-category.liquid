<section class="filter-inspire-imagination">
  <div class="container">
    <div class="py-16 3xl:py-24 w-full text-center">
      {% if section.settings.heading != blank %}
        <h2 class="text-2xl 3xl:text-[44px] text-secondary font-semibold inline-block leading-[1.2]">
          {{ section.settings.heading }}
        </h2>
      {% endif %}
    </div>

    <div class="flex flex-col md:flex-row gap-10 pb-14 3xl:pb-24">
      <!-- Sidebar Filters -->
      <aside class="w-full md:w-1/4 gap-y-10 flex flex-wrap flex-col">
        {% for filter in section.settings.project_filters.value %}
          <div class="col">
            <h3 class="text-2xl 3xl:text-4xl font-semibold border-b-2 border-[#707070] pb-5 mb-7">
              {{ filter.filter_name }}
            </h3>
            <div class="flex flex-wrap gap-2 items-end">
              {% for option in filter.filter_options %}
                <button
                  class="filter-btn px-4 py-2 text-primary hover:text-white hover:bg-primary border-[3px] border-primary rounded-full uppercase font-bold text-xs tracking-widest"
                  data-filter="{{ option }}"
                >
                  {{ option }}
                </button>
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </aside>

      <!-- Projects Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 w-full md:w-[75%]">
        {% for block in section.blocks %}
          {% if block.type == 'project' %}
            <div
              class="project-item bg-white rounded-2xl overflow-hidden relative"
              data-tags="{{ block.settings.project_tag }}"
            >
              {% if block.settings.project_image != blank %}
                <img
                  src="{{ block.settings.project_image | img_url: '600x600' }}"
                  class="w-full aspect-square object-cover h-full"
                  alt="Project Image"
                >
              {% else %}
                <img
                  src="https://via.placeholder.com/600"
                  class="w-full aspect-square object-cover h-full"
                  alt="Placeholder"
                >
              {% endif %}
              <div class="absolute top-0 left-0 w-full h-full p-4 xl:p-3 2xl:p-4 flex flex-wrap items-end justify-end">
                <div class="btn-wrap flex flex-wrap gap-2 justify-end">
                  {% if block.settings.project_tag != blank %}
                    <a
                      class="px-3 py-1 hover:text-white bg-white hover:bg-primary border-[3px] border-white hover:border-primary rounded-full uppercase font-bold text-[11px] tracking-widest inline-block"
                    >
                      {{ block.settings.project_tag }}
                    </a>
                  {% endif %}
                  {% if block.settings.project_location != blank %}
                    <a
                      class="px-3 py-1 hover:text-white bg-white hover:bg-primary border-[3px] border-white hover:border-primary rounded-full uppercase font-bold text-[11px] tracking-widest inline-block"
                    >
                      {{ block.settings.project_location }}
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- Filtering Script -->
<script>
  document.querySelectorAll('.filter-btn').forEach(button => {
    button.addEventListener('click', function() {
      let selectedFilter = this.getAttribute('data-filter');
      let projects = document.querySelectorAll('.project-item');

      projects.forEach(project => {
        let tags = project.getAttribute('data-tags');
        if (tags.includes(selectedFilter) || selectedFilter === "All") {
          project.style.display = "block";
        } else {
          project.style.display = "none";
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "Vuba Category",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Heading",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "view_more_text",
      "label": "View More Button Text",
      "default": "View More"
    },
    {
      "type": "text",
      "id": "more_filters_text",
      "label": "More Filters Button Text",
      "default": "More Filters"
    },
    {
      "type": "metaobject",
      "id": "project_filters",
      "label": "Select Filters",
      "metaobject_type": "project_filters"
    }
  ],
  "blocks": [
    {
      "type": "project",
      "name": "Project",
      "settings": [
        {
          "type": "image_picker",
          "id": "project_image",
          "label": "Project Image"
        },
        {
          "type": "text",
          "id": "project_tag",
          "label": "Tag"
        },
        {
          "type": "text",
          "id": "project_location",
          "label": "Location"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Vuba Category",
      "category": "Custom"
    }
  ]
}
{% endschema %}
